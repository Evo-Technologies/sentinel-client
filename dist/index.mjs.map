{"version":3,"sources":["../src/project.ts","../src/client.ts","../src/integration.ts","../src/autogen.ts"],"sourcesContent":["import { SentinelClient } from \"./client\";\r\nimport { SentinelIntegration } from \"./integration\";\r\n\r\nexport class SentinelProject {\r\n    id: string;\r\n    client: SentinelClient;\r\n    constructor(client: SentinelClient, id: string) {\r\n        this.client = client;\r\n        this.id = id;\r\n    }\r\n\r\n    getIntegration<T extends SentinelIntegration>(type: { new(project:SentinelProject, idOrName:string): T }, idOrName: string ): T {\r\n        return new type(this, idOrName);\r\n    }\r\n}","import { SentinelProject } from \"./project\";\r\n\r\nexport class SentinelClient {\r\n    apiKey: string;\r\n    endpoint: string;\r\n    constructor(apiKey:string, endpoint?:string) {\r\n        this.apiKey = apiKey;\r\n        this.endpoint = endpoint || \"https://sentinelapi.evo.tech\";\r\n        console.log(\"sentinel client initialized\", this.apiKey, this.endpoint);\r\n    }\r\n\r\n    getProject(projectId:string) {\r\n        return new SentinelProject(this, projectId);\r\n    }\r\n\r\n    async sendMessage(projectId:string, integrationNameOrId:string, messageName: string, message: any) : Promise<any> {\r\n        const uri = `${this.endpoint}/projects/${projectId}/integrations/${integrationNameOrId}/messages/${messageName}`;\r\n        console.log(\"fetching\", uri);\r\n        const r = await fetch(uri, {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\" : \"application/json\",\r\n                \"Accept\": \"application/json\",\r\n                \"Sentinel-Api-Key\": this.apiKey\r\n            },\r\n            body: JSON.stringify(message)\r\n        });\r\n\r\n        if (r.ok) {\r\n            return await r.json();\r\n        } else {\r\n            const messageText = await r.text();\r\n            throw new Error(`${r.status} [${r.statusText}]: ${messageText}`);\r\n        }\r\n    }\r\n}","import { SentinelProject } from \"./project\";\r\n\r\nexport class SentinelIntegration {\r\n    idOrName: string;\r\n    project: SentinelProject;\r\n\r\n    constructor(project: SentinelProject, idOrName: string) {\r\n        this.project = project;\r\n        this.idOrName = idOrName;\r\n    }\r\n\r\n    async sendMessage(name:string, message: any) {\r\n        return await this.project.client.sendMessage(this.project.id, this.idOrName, name, message);\r\n    }\r\n}","\r\n// https://localhost:7082/ts\r\nimport { SentinelProject } from \"./project\"\r\nimport { SentinelIntegration } from \"./integration\"\r\nexport namespace EvoVoiceIntegration {\r\n    export class Integration extends SentinelIntegration {\r\n        constructor(project: SentinelProject, idOrName:string) {\r\n            super(project, idOrName);\r\n        }\r\n    async listCustomers(request:ListCustomersRequest) : Promise<ListCustomersResponse> {\r\n        return await this.sendMessage('listCustomers', request);\r\n    }\r\n    async getCustomer(request:GetCustomerRequest) : Promise<GetCustomerResponse> {\r\n        return await this.sendMessage('getCustomer', request);\r\n    }\r\n    }\r\n    export interface ListCustomersRequest {\r\n        AccountIds?:string[],\r\n        NameFilter?:string,\r\n        ParentCustomerIds?:string[],\r\n        ShallowParent?:boolean,\r\n        TagIds?:string[],\r\n        Page?:number,\r\n        All?:boolean,\r\n        CountPerPage?:number,\r\n        SpecificIds?:string[],\r\n        SortField?:string,\r\n        SortOrder?:number,\r\n        SimplifiedPaging?:boolean,\r\n    }\r\n    export interface ListCustomersResponse {\r\n        Items?:{\r\n                Name?:string,\r\n                ParentAccountId?:string,\r\n                TwilioAccountSid?:string,\r\n                AncestorIds?:string[],\r\n                MaxPhoneNumbers?:number,\r\n                IsBYOA?:boolean,\r\n                TrustHubProfileSid?:string,\r\n                LogoId?:string,\r\n                LogoUri?:string,\r\n                BillingSettings?:{\r\n                    Base?:{\r\n                        BaseCost?:number,\r\n                        RawUnitMultiplier?:number,\r\n                        UnitCost?:number,\r\n                        Allowance?:number,\r\n                    },\r\n                    LocalNumbers?:{\r\n                        BaseCost?:number,\r\n                        RawUnitMultiplier?:number,\r\n                        UnitCost?:number,\r\n                        Allowance?:number,\r\n                    },\r\n                    TollFreeNumbers?:{\r\n                        BaseCost?:number,\r\n                        RawUnitMultiplier?:number,\r\n                        UnitCost?:number,\r\n                        Allowance?:number,\r\n                    },\r\n                    InboundVoiceCalls?:{\r\n                        BaseCost?:number,\r\n                        RawUnitMultiplier?:number,\r\n                        UnitCost?:number,\r\n                        Allowance?:number,\r\n                    },\r\n                    OutboundVoiceCalls?:{\r\n                        BaseCost?:number,\r\n                        RawUnitMultiplier?:number,\r\n                        UnitCost?:number,\r\n                        Allowance?:number,\r\n                    },\r\n                    InboundFaxes?:{\r\n                        BaseCost?:number,\r\n                        RawUnitMultiplier?:number,\r\n                        UnitCost?:number,\r\n                        Allowance?:number,\r\n                    },\r\n                    OutboundFaxes?:{\r\n                        BaseCost?:number,\r\n                        RawUnitMultiplier?:number,\r\n                        UnitCost?:number,\r\n                        Allowance?:number,\r\n                    },\r\n                    InboundSmsMessages?:{\r\n                        BaseCost?:number,\r\n                        RawUnitMultiplier?:number,\r\n                        UnitCost?:number,\r\n                        Allowance?:number,\r\n                    },\r\n                    OutboundSmsMessages?:{\r\n                        BaseCost?:number,\r\n                        RawUnitMultiplier?:number,\r\n                        UnitCost?:number,\r\n                        Allowance?:number,\r\n                    },\r\n                    AIInsights?:{\r\n                        BaseCost?:number,\r\n                        RawUnitMultiplier?:number,\r\n                        UnitCost?:number,\r\n                        Allowance?:number,\r\n                    },\r\n                    AILiveMinutes?:{\r\n                        BaseCost?:number,\r\n                        RawUnitMultiplier?:number,\r\n                        UnitCost?:number,\r\n                        Allowance?:number,\r\n                    },\r\n                    AIMessages?:{\r\n                        BaseCost?:number,\r\n                        RawUnitMultiplier?:number,\r\n                        UnitCost?:number,\r\n                        Allowance?:number,\r\n                    },\r\n                },\r\n                Id?:string,\r\n                DateCreated?:string,\r\n                DateLastModified?:string,\r\n                CreatedBy?:string,\r\n                LastModifiedBy?:string,\r\n            }[],\r\n        TotalCount?:number,\r\n        TotalPages?:number,\r\n        HasMorePages?:boolean,\r\n    }\r\n    export interface GetCustomerRequest {\r\n        CustomerId?:string,\r\n    }\r\n    export interface GetCustomerResponse {\r\n        AccountId?:string,\r\n        ParentCustomerId?:string,\r\n        Breadcrumb?:{\r\n                Id?:string,\r\n                Name?:string,\r\n            }[],\r\n        AccountName?:string,\r\n        IsStaging?:boolean,\r\n        Name?:string,\r\n        ReferenceId?:string,\r\n        Data?:{\r\n        },\r\n        Tags?:{\r\n                Id?:string,\r\n                Name?:string,\r\n                Color?:number,\r\n            }[],\r\n        Schedule?:{\r\n            TimeZoneId?:string,\r\n            Inherit?:boolean,\r\n            ForceClosed?:boolean,\r\n            Rules?:{\r\n                    Id?:string,\r\n                    Name?:string,\r\n                    Priority?:number,\r\n                    State?:string,\r\n                    Source?:string,\r\n                    Condition?:string,\r\n                    SimpleRuleType?:number,\r\n                    CustomerState?:string,\r\n                    FlowId?:string,\r\n                    FlowParams?:{\r\n                    },\r\n                    IsAllDay?:boolean,\r\n                    StartDate?:string,\r\n                    StartTime?:string,\r\n                    EndTime?:string,\r\n                    BySetPosition?:number[],\r\n                    ByMonth?:number[],\r\n                    ByWeekNo?:number[],\r\n                    ByYearDay?:number[],\r\n                    ByMonthDay?:number[],\r\n                    ByDay?:{\r\n                            Offset?:number,\r\n                            DayOfWeek?:number,\r\n                        }[],\r\n                    ByHour?:number[],\r\n                    ByMinute?:number[],\r\n                    Interval?:number,\r\n                    Count?:number,\r\n                    UntilDate?:string,\r\n                    Frequency?:number,\r\n                }[],\r\n            DefaultState?:string,\r\n        },\r\n        IntegrationData?:{\r\n        },\r\n        OverrideBillingSettings?:boolean,\r\n        BillingSettings?:{\r\n            Base?:{\r\n                BaseCost?:number,\r\n                RawUnitMultiplier?:number,\r\n                UnitCost?:number,\r\n                Allowance?:number,\r\n            },\r\n            LocalNumbers?:{\r\n                BaseCost?:number,\r\n                RawUnitMultiplier?:number,\r\n                UnitCost?:number,\r\n                Allowance?:number,\r\n            },\r\n            TollFreeNumbers?:{\r\n                BaseCost?:number,\r\n                RawUnitMultiplier?:number,\r\n                UnitCost?:number,\r\n                Allowance?:number,\r\n            },\r\n            InboundVoiceCalls?:{\r\n                BaseCost?:number,\r\n                RawUnitMultiplier?:number,\r\n                UnitCost?:number,\r\n                Allowance?:number,\r\n            },\r\n            OutboundVoiceCalls?:{\r\n                BaseCost?:number,\r\n                RawUnitMultiplier?:number,\r\n                UnitCost?:number,\r\n                Allowance?:number,\r\n            },\r\n            InboundFaxes?:{\r\n                BaseCost?:number,\r\n                RawUnitMultiplier?:number,\r\n                UnitCost?:number,\r\n                Allowance?:number,\r\n            },\r\n            OutboundFaxes?:{\r\n                BaseCost?:number,\r\n                RawUnitMultiplier?:number,\r\n                UnitCost?:number,\r\n                Allowance?:number,\r\n            },\r\n            InboundSmsMessages?:{\r\n                BaseCost?:number,\r\n                RawUnitMultiplier?:number,\r\n                UnitCost?:number,\r\n                Allowance?:number,\r\n            },\r\n            OutboundSmsMessages?:{\r\n                BaseCost?:number,\r\n                RawUnitMultiplier?:number,\r\n                UnitCost?:number,\r\n                Allowance?:number,\r\n            },\r\n            AIInsights?:{\r\n                BaseCost?:number,\r\n                RawUnitMultiplier?:number,\r\n                UnitCost?:number,\r\n                Allowance?:number,\r\n            },\r\n            AILiveMinutes?:{\r\n                BaseCost?:number,\r\n                RawUnitMultiplier?:number,\r\n                UnitCost?:number,\r\n                Allowance?:number,\r\n            },\r\n            AIMessages?:{\r\n                BaseCost?:number,\r\n                RawUnitMultiplier?:number,\r\n                UnitCost?:number,\r\n                Allowance?:number,\r\n            },\r\n        },\r\n        OverrideAppSettings?:boolean,\r\n        AppSettings?:{\r\n            EnablePhoneNumberManagement?:boolean,\r\n            EnableDeviceManagement?:boolean,\r\n            EnableDialer?:boolean,\r\n            EnableCallHistory?:boolean,\r\n            EnableAssistants?:boolean,\r\n            ShowFileNameInMessageCenter?:boolean,\r\n            ChakraTheme?:string,\r\n            CustomCss?:string,\r\n            PageTitle?:string,\r\n            StringMappings?:string,\r\n            LogoutUrl?:string,\r\n            PortMyNumberUrl?:string,\r\n        },\r\n        Id?:string,\r\n        DateCreated?:string,\r\n        DateLastModified?:string,\r\n        CreatedBy?:string,\r\n        LastModifiedBy?:string,\r\n    }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAGO,IAAM,kBAAN,MAAsB;AAAA,EAGzB,YAAY,QAAwB,IAAY;AAC5C,SAAK,SAAS;AACd,SAAK,KAAK;AAAA,EACd;AAAA,EAEA,eAA8C,MAA4D,UAAsB;AAC5H,WAAO,IAAI,KAAK,MAAM,QAAQ;AAAA,EAClC;AACJ;;;ACZO,IAAM,iBAAN,MAAqB;AAAA,EAGxB,YAAY,QAAe,UAAkB;AACzC,SAAK,SAAS;AACd,SAAK,WAAW,YAAY;AAC5B,YAAQ,IAAI,+BAA+B,KAAK,QAAQ,KAAK,QAAQ;AAAA,EACzE;AAAA,EAEA,WAAW,WAAkB;AACzB,WAAO,IAAI,gBAAgB,MAAM,SAAS;AAAA,EAC9C;AAAA,EAEM,YAAY,WAAkB,qBAA4B,aAAqB,SAA6B;AAAA;AAC9G,YAAM,MAAM,GAAG,KAAK,QAAQ,aAAa,SAAS,iBAAiB,mBAAmB,aAAa,WAAW;AAC9G,cAAQ,IAAI,YAAY,GAAG;AAC3B,YAAM,IAAI,MAAM,MAAM,KAAK;AAAA,QACvB,QAAQ;AAAA,QACR,SAAS;AAAA,UACL,gBAAiB;AAAA,UACjB,UAAU;AAAA,UACV,oBAAoB,KAAK;AAAA,QAC7B;AAAA,QACA,MAAM,KAAK,UAAU,OAAO;AAAA,MAChC,CAAC;AAED,UAAI,EAAE,IAAI;AACN,eAAO,MAAM,EAAE,KAAK;AAAA,MACxB,OAAO;AACH,cAAM,cAAc,MAAM,EAAE,KAAK;AACjC,cAAM,IAAI,MAAM,GAAG,EAAE,MAAM,KAAK,EAAE,UAAU,MAAM,WAAW,EAAE;AAAA,MACnE;AAAA,IACJ;AAAA;AACJ;;;ACjCO,IAAM,sBAAN,MAA0B;AAAA,EAI7B,YAAY,SAA0B,UAAkB;AACpD,SAAK,UAAU;AACf,SAAK,WAAW;AAAA,EACpB;AAAA,EAEM,YAAY,MAAa,SAAc;AAAA;AACzC,aAAO,MAAM,KAAK,QAAQ,OAAO,YAAY,KAAK,QAAQ,IAAI,KAAK,UAAU,MAAM,OAAO;AAAA,IAC9F;AAAA;AACJ;;;ACVO,IAAU;AAAA,CAAV,CAAUA,yBAAV;AAAA,EACI,MAAM,oBAAoB,oBAAoB;AAAA,IACjD,YAAY,SAA0B,UAAiB;AACnD,YAAM,SAAS,QAAQ;AAAA,IAC3B;AAAA,IACE,cAAc,SAA+D;AAAA;AAC/E,eAAO,MAAM,KAAK,YAAY,iBAAiB,OAAO;AAAA,MAC1D;AAAA;AAAA,IACM,YAAY,SAA2D;AAAA;AACzE,eAAO,MAAM,KAAK,YAAY,eAAe,OAAO;AAAA,MACxD;AAAA;AAAA,EACA;AAVO,EAAAA,qBAAM;AAAA,GADA;","names":["EvoVoiceIntegration"]}